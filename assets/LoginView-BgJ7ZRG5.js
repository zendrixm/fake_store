import{d as x,u as E,r as d,c as T,a as t,b as a,w as r,e as i,o as m,f as B,g as v,h as c,i as w,t as b,E as V}from"./index-3CNvc0aN.js";const N="/fake_store/assets/eloura_blue-DpEZw_wu.png",R={class:"auth-wrapper"},A={class:"auth-card"},D={class:"login-links"},M=x({__name:"LoginView",setup(F){const p=E(),k=B(),_=d(),f=d(!1),s=d(!0),o=d({email:"",username:"",password:"",confirmPassword:"",remember:!1}),y={email:[{required:!0,message:"This information is required.",trigger:"blur"}],username:[{required:!0,message:"This information is required.",trigger:"blur"}],password:[{required:!0,message:"This information is required.",trigger:"blur"}],confirmPassword:[{required:!0,message:"This information is required.",trigger:"blur"}]},h=async g=>{await _.value.validate(async e=>{if(e){f.value=!0;try{let n=!1;if(g==="login")n=await p.login(o.value.username,o.value.password);else{const u={username:o.value.username,password:o.value.password,email:o.value.email};n=await p.signup(u)}n?k.push("/"):V.error(p.error||(g==="login"?"Login failed":"Sign up failed"))}catch{V.error("Invalid credentials")}finally{f.value=!1}}})},q=()=>{h(s.value?"login":"signup")},S=()=>{s.value=!s.value,o.value.username="",o.value.password=""};return(g,e)=>{const n=i("el-input"),u=i("el-form-item"),C=i("el-checkbox"),L=i("el-button"),P=i("router-link"),U=i("el-form");return m(),T("div",R,[t("div",A,[e[8]||(e[8]=t("div",{class:"login-header"},[t("img",{src:N,alt:"Eloura Logo",height:135,width:170})],-1)),a(U,{model:o.value,rules:y,ref_key:"formRef",ref:_,"label-position":"top"},{default:r(()=>[s.value?c("",!0):(m(),v(u,{key:0,label:"Email",prop:"email"},{default:r(()=>[a(n,{modelValue:o.value.email,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.email=l)},null,8,["modelValue"])]),_:1})),a(u,{label:"Username",prop:"username"},{default:r(()=>[a(n,{modelValue:o.value.username,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.username=l)},null,8,["modelValue"])]),_:1}),a(u,{label:"Password",prop:"password"},{default:r(()=>[a(n,{modelValue:o.value.password,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.password=l),"show-password":""},null,8,["modelValue"])]),_:1}),s.value?c("",!0):(m(),v(u,{key:1,label:"Confirm password",prop:"confirmPassword"},{default:r(()=>[a(n,{modelValue:o.value.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.confirmPassword=l),"show-password":""},null,8,["modelValue"])]),_:1})),s.value?(m(),v(u,{key:2},{default:r(()=>[a(C,{modelValue:o.value.remember,"onUpdate:modelValue":e[4]||(e[4]=l=>o.value.remember=l)},{default:r(()=>e[5]||(e[5]=[w("Remember my username")])),_:1},8,["modelValue"])]),_:1})):c("",!0),a(L,{class:"btn-solid-primary",onClick:q,loading:f.value,round:""},{default:r(()=>[w(b(s.value?"Login":"Sign up"),1)]),_:1},8,["loading"]),t("div",D,[a(P,{to:"/forgotUsernamePassword"},{default:r(()=>e[6]||(e[6]=[w("Forgot username or password?")])),_:1}),e[7]||(e[7]=t("br",null,null,-1)),t("a",{onClick:S},b(s.value?"Sign up":"Already have an account"),1)])]),_:1},8,["model"])])])}}});export{M as default};
