import{d as S,u as L,c as N,a as j,r as $,w as x,p as D,b as P,j as n,e as q,f as i,k as F,t as m,x as y,g as u,h as V,A as H,o as r,l as f,E as B}from"./index-DUnkl4LZ.js";const I="data:image/svg+xml,%3csvg%20viewBox='0%200%2048%2048'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%2034.5V42h7.5l22.13-22.13-7.5-7.5L6%2034.5zm35.41-20.41c.78-.78.78-2.05%200-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83%200l-3.66%203.66%207.5%207.5%203.66-3.66z'%20fill='%23134074'%20class='fill-000000'%3e%3c/path%3e%3cpath%20d='M0%200h48v48H0z'%20fill='none'%3e%3c/path%3e%3c/svg%3e";function k(g){return g?g.charAt(0).toUpperCase()+g.slice(1):""}const T={key:0,class:"user-profile"},G={class:"space-between"},J={key:0,class:"flex-end"},O=S({__name:"UserProfile",setup(g){const U=L(),s=N(()=>U.userProfile),{t:h,locale:E}=j(),t=$(!1),b=$(),e=$({username:"",email:"",firstname:"",lastname:"",phone:"",street:"",city:"",zipcode:""}),c=l=>({required:!0,message:N(()=>h("validation.required",{field:h(l)})),trigger:"blur"}),M={username:[c("username")],email:[c("email")],firstname:[c("firstName")],lastname:[c("lastName")],phone:[c("phone")],street:[c("street")],city:[c("city")],zipcode:[c("zipCode")]},A=()=>{var l,a,z,v,d,p,C,_,o,w;t.value=!t.value,t.value&&((l=b.value)==null||l.resetFields(),e.value.username=((a=s.value)==null?void 0:a.username)||"",e.value.email=((z=s.value)==null?void 0:z.email)||"",e.value.firstname=((v=s.value)==null?void 0:v.name.firstname)||"",e.value.lastname=((d=s.value)==null?void 0:d.name.lastname)||"",e.value.phone=((p=s.value)==null?void 0:p.phone)||"",e.value.street=((C=s.value)==null?void 0:C.address.street)||"",e.value.city=((_=s.value)==null?void 0:_.address.city)||"",e.value.zipcode=((o=s.value)==null?void 0:o.address.zipcode)||""),(w=b.value)==null||w.clearValidate()},R=()=>{var l;(l=b.value)==null||l.validate(a=>{a?(B.success("Profile updated successfully!"),t.value=!1):B.error("Please complete all required fields.")})};return x(E,()=>{var l;(l=b.value)==null||l.validate()}),D(()=>{U.fetchUserProfile().then(()=>{const l=U.userProfile;l&&(e.value.username=l.username,e.value.email=l.email,e.value.firstname=l.name.firstname,e.value.lastname=l.name.lastname,e.value.phone=l.phone,e.value.street=l.address.street,e.value.city=l.address.city,e.value.zipcode=l.address.zipcode)})}),(l,a)=>{const z=V("el-icon"),v=V("el-input"),d=V("el-text"),p=V("el-form-item"),C=V("el-form"),_=V("el-button");return s.value?(r(),P("div",T,[q("div",G,[q("h3",null,m(y(k)(s.value.name.firstname))+" "+m(y(k)(s.value.name.lastname)),1),i(z,{size:16,onClick:A},{default:u(()=>a[9]||(a[9]=[q("img",{src:I,width:16,height:16,alt:"edit"},null,-1)])),_:1})]),a[10]||(a[10]=q("div",{class:"v-spacer-20"},null,-1)),i(C,{ref_key:"formRef",ref:b,model:e.value,rules:M,"label-position":"right",class:H(t.value?"":"is-edit")},{default:u(()=>[i(p,{label:l.$t("username"),prop:"username",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.username,"onUpdate:modelValue":a[0]||(a[0]=o=>e.value.username=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(s.value.username),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("email"),prop:"email",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.email,"onUpdate:modelValue":a[1]||(a[1]=o=>e.value.email=o),disabled:""},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(s.value.email),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("firstName"),prop:"firstname",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.firstname,"onUpdate:modelValue":a[2]||(a[2]=o=>e.value.firstname=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(y(k)(s.value.name.firstname)),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("lastName"),prop:"lastname",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.lastname,"onUpdate:modelValue":a[3]||(a[3]=o=>e.value.lastname=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(y(k)(s.value.name.lastname)),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("phone"),prop:"phone",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.phone,"onUpdate:modelValue":a[4]||(a[4]=o=>e.value.phone=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(s.value.phone),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("street"),prop:"street",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.street,"onUpdate:modelValue":a[5]||(a[5]=o=>e.value.street=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(y(k)(s.value.address.street)),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("city"),prop:"city",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.city,"onUpdate:modelValue":a[6]||(a[6]=o=>e.value.city=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(y(k)(s.value.address.city)),1)]),_:1}))]),_:1},8,["label","required"]),i(p,{label:l.$t("zipCode"),prop:"zipcode",required:t.value},{default:u(()=>[t.value?(r(),n(v,{key:0,modelValue:e.value.zipcode,"onUpdate:modelValue":a[7]||(a[7]=o=>e.value.zipcode=o)},null,8,["modelValue"])):(r(),n(d,{key:1},{default:u(()=>[f(m(s.value.address.zipcode),1)]),_:1}))]),_:1},8,["label","required"])]),_:1},8,["model","class"]),a[11]||(a[11]=q("div",{class:"v-spacer-20"},null,-1)),t.value?(r(),P("div",J,[i(_,{class:"btn-solid-primary",onClick:R},{default:u(()=>[f(m(l.$t("save")),1)]),_:1}),i(_,{class:"btn-secondary",onClick:a[8]||(a[8]=o=>t.value=!1)},{default:u(()=>[f(m(l.$t("cancel")),1)]),_:1})])):F("",!0)])):(r(),n(d,{key:1},{default:u(()=>a[12]||(a[12]=[f("Loading profile...")])),_:1}))}}});export{O as default};
