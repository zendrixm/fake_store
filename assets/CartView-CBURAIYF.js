import{d as U,y as D,f as P,g as S,c as C,a as c,v as V,i as t,t as d,j as l,k as r,o as v,q as h,u as B,D as Q,s as N,F as G,x as J,E as K,m as O,_ as W,h as X}from"./index-DaW_XuWa.js";const Y={class:"cart-wrapper"},Z={class:"txtDarkBlue"},ee={key:0,class:"table-scroll-wrapper"},te=["src","alt"],le={class:"card-header"},ae=["src"],ne={class:"card-body"},oe={key:1,class:"cart-total"},se={class:"check-all-wrapper"},ce={class:"total-wrapper"},de={class:"flex gap-5"},ue=U({__name:"AddToCartSection",props:{products:{type:Array,default:()=>[]}},emits:["handleQuantityChange","removeProduct","selectionChange"],setup(m,{emit:b}){const f=O(),k=D(),y=m,_=b,o=P([]),u=P(2),i=S(()=>o.value.length===y.products.length),R=S(()=>o.value.length>0&&!i.value),E=a=>{o.value=a.map(n=>n.id),_("selectionChange",o.value)},L=(a,n)=>{_("handleQuantityChange",{value:a,product:n})},q=a=>{_("removeProduct",a)},T=a=>{o.value=a?y.products.map(n=>n.id):[],_("selectionChange",o.value)},z=async()=>{if(o.value.length===0){K.warning("Please select at least one product to checkout.");return}await k.checkoutSelectedProducts(u.value,o.value),f.push("/confirmation")};return(a,n)=>{const p=r("el-table-column"),F=r("el-input-number"),I=r("el-icon"),$=r("el-button"),M=r("el-table"),A=r("el-checkbox"),g=r("el-text"),w=r("el-row"),j=r("el-checkbox-group"),H=r("el-col");return v(),C("div",Y,[c("h2",Z,d(a.$t("shoppingCart")),1),n[4]||(n[4]=c("div",{class:"v-spacer-15"},null,-1)),m.products.length?(v(),C("div",ee,[t(M,{class:"cart-table hidden-xs",data:m.products,stripe:"",onSelectionChange:E,"row-key":"id"},{default:l(()=>[t(p,{type:"selection",width:"55"}),t(p,{label:"",width:"120"},{default:l(({row:e})=>[c("img",{src:e.image,alt:e.title,width:"70",height:"80"},null,8,te)]),_:1}),t(p,{prop:"title",label:a.$t("product"),width:"280"},null,8,["label"]),t(p,{prop:"price",label:a.$t("unitPrice"),width:"170"},{default:l(({row:e})=>[h(" $"+d(e.price.toFixed(2)),1)]),_:1},8,["label"]),t(p,{label:a.$t("quantity"),width:"220"},{default:l(({row:e})=>[t(F,{modelValue:e.quantity,"onUpdate:modelValue":s=>e.quantity=s,min:1,onChange:s=>a.$emit("handleQuantityChange",s,e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),t(p,{label:a.$t("subtotal"),width:"170"},{default:l(({row:e})=>[h(" $"+d((e.price*e.quantity).toFixed(2)),1)]),_:1},8,["label"]),t(p,{label:a.$t("action"),align:"center",width:"80"},{default:l(({row:e})=>[t($,{class:"btn-icon flex-end",onClick:s=>q(e.id)},{default:l(()=>[t(I,{size:18,color:"#00549a"},{default:l(()=>[t(B(Q))]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])])):V("",!0),t(w,{gutter:20},{default:l(()=>[t(H,{xs:24},{default:l(()=>[m.products.length?(v(),N(j,{key:0,modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=e=>o.value=e),class:"cart-card-mobile",onChange:n[1]||(n[1]=()=>_("selectionChange",o.value))},{default:l(()=>[(v(!0),C(G,null,J(m.products,e=>(v(),C("div",{class:"cart-card",key:e.id},[c("div",le,[t(A,{value:e.id},null,8,["value"]),c("img",{src:e.image,alt:"Product Image",class:"product-img"},null,8,ae)]),c("div",ne,[t(g,{class:"product-title"},{default:l(()=>[h(d(e.title),1)]),_:2},1024),t(w,null,{default:l(()=>[t(g,{class:"font-weight-bold"},{default:l(()=>[h(d(a.$t("unitPrice")),1)]),_:1}),n[2]||(n[2]=c("div",{class:"spacer-5"},null,-1)),t(g,null,{default:l(()=>[h("$"+d(e.price.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(w,null,{default:l(()=>[t(g,{class:"font-weight-bold"},{default:l(()=>[h(d(a.$t("subtotal")),1)]),_:1}),n[3]||(n[3]=c("div",{class:"spacer-5"},null,-1)),t(g,null,{default:l(()=>[h("$"+d((e.price*e.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(F,{modelValue:e.quantity,"onUpdate:modelValue":s=>e.quantity=s,min:1,onChange:s=>L(s,e)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t($,{class:"btn-icon flex-end",onClick:s=>q(e.id)},{default:l(()=>[t(I,{size:18,color:"#00549a"},{default:l(()=>[t(B(Q))]),_:1})]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["modelValue"])):V("",!0),m.products.length?(v(),C("div",oe,[c("div",se,[t(A,{label:a.$t("all"),"model-value":i.value,indeterminate:R.value,onChange:T,class:"hidden-sm-and-up"},null,8,["label","model-value","indeterminate"])]),c("div",ce,[c("div",de,[t(g,null,{default:l(()=>[h(d(a.$t("total"))+": ",1)]),_:1}),t(g,{class:"txtDarkBlue font-weight-bold"},{default:l(()=>[h(" $"+d(m.products.filter(e=>o.value.includes(e.id)).reduce((e,s)=>e+s.price*s.quantity,0).toFixed(2)),1)]),_:1})]),t($,{class:"btn btn-primary",onClick:z},{default:l(()=>[h(d(a.$t("checkout")),1)]),_:1})])])):V("",!0)]),_:1})]),_:1})])}}}),ie=W(ue,[["__scopeId","data-v-9910d8bc"]]),x=2,he=U({__name:"CartView",setup(m){const b=P([]),f=D(),k=S(()=>f.cartList),y=u=>{b.value=u},_=async(u,i)=>{console.log("Row",i),i&&(i.quantity=u,await f.updateCartProduct(x,i.id,u))},o=async u=>{b.value=b.value.filter(i=>i!==u),await f.removeFromCartAndSync(x,u)};return X(()=>{f.fetchCart(x)}),(u,i)=>(v(),N(ie,{products:k.value,onHandleQuantityChange:_,onRemoveProduct:o,onSelectionChange:y},null,8,["products"]))}});export{he as default};
