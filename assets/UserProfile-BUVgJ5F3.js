import{d as M,u as L,l as N,r as C,m as F,c as P,g as o,a as V,b as n,h,t as f,s as c,w as u,e as g,y as A,o as s,i as p,E}from"./index-3CNvc0aN.js";const R="data:image/svg+xml,%3csvg%20viewBox='0%200%2048%2048'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%2034.5V42h7.5l22.13-22.13-7.5-7.5L6%2034.5zm35.41-20.41c.78-.78.78-2.05%200-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83%200l-3.66%203.66%207.5%207.5%203.66-3.66z'%20fill='%23134074'%20class='fill-000000'%3e%3c/path%3e%3cpath%20d='M0%200h48v48H0z'%20fill='none'%3e%3c/path%3e%3c/svg%3e";function y(_){return _?_.charAt(0).toUpperCase()+_.slice(1):""}const D={key:0,class:"user-profile"},H={class:"space-between"},T={key:0,class:"flex-end"},$=M({__name:"UserProfile",setup(_){const U=L(),r=N(()=>U.userProfile),a=C(!1),k=C(),l=C({username:"",email:"",firstname:"",lastname:"",phone:"",street:"",city:"",zipcode:""}),w={username:[{required:!0,message:"Username is required",trigger:"blur"}],email:[{required:!0,message:"Email is required",trigger:"blur"}],firstname:[{required:!0,message:"First name is required",trigger:"blur"}],lastname:[{required:!0,message:"Last name is required",trigger:"blur"}],phone:[{required:!0,message:"Phone is required",trigger:"blur"}],street:[{required:!0,message:"Street is required",trigger:"blur"}],city:[{required:!0,message:"City is required",trigger:"blur"}],zipcode:[{required:!0,message:"Postal code is required",trigger:"blur"}]},S=()=>{var i,e,b,m,d,v,z,q,t,x;a.value=!a.value,a.value&&((i=k.value)==null||i.resetFields(),l.value.username=((e=r.value)==null?void 0:e.username)||"",l.value.email=((b=r.value)==null?void 0:b.email)||"",l.value.firstname=((m=r.value)==null?void 0:m.name.firstname)||"",l.value.lastname=((d=r.value)==null?void 0:d.name.lastname)||"",l.value.phone=((v=r.value)==null?void 0:v.phone)||"",l.value.street=((z=r.value)==null?void 0:z.address.street)||"",l.value.city=((q=r.value)==null?void 0:q.address.city)||"",l.value.zipcode=((t=r.value)==null?void 0:t.address.zipcode)||""),(x=k.value)==null||x.clearValidate()},B=()=>{var i;(i=k.value)==null||i.validate(e=>{e?(E.success("Profile updated successfully!"),a.value=!1):E.error("Please complete all required fields.")})};return F(()=>{U.fetchUserProfile().then(()=>{const i=U.userProfile;i&&(l.value.username=i.username,l.value.email=i.email,l.value.firstname=i.name.firstname,l.value.lastname=i.name.lastname,l.value.phone=i.phone,l.value.street=i.address.street,l.value.city=i.address.city,l.value.zipcode=i.address.zipcode)})}),(i,e)=>{const b=g("el-icon"),m=g("el-input"),d=g("el-text"),v=g("el-form-item"),z=g("el-form"),q=g("el-button");return r.value?(s(),P("div",D,[V("div",H,[V("h3",null,f(c(y)(r.value.name.firstname))+" "+f(c(y)(r.value.name.lastname)),1),n(b,{size:16,onClick:S},{default:u(()=>e[9]||(e[9]=[V("img",{src:R},null,-1)])),_:1})]),e[12]||(e[12]=V("div",{class:"v-spacer-20"},null,-1)),n(z,{ref_key:"formRef",ref:k,model:l.value,rules:w,"label-position":"right",class:A(a.value?"":"is-edit")},{default:u(()=>[n(v,{label:"Username",prop:"username",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>l.value.username=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(r.value.username),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"Email",prop:"email",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.email,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value.email=t),disabled:""},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(r.value.email),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"First name",prop:"firstname",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.firstname,"onUpdate:modelValue":e[2]||(e[2]=t=>l.value.firstname=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(c(y)(r.value.name.firstname)),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"Last name",prop:"lastname",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.lastname,"onUpdate:modelValue":e[3]||(e[3]=t=>l.value.lastname=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(c(y)(r.value.name.lastname)),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"Phone",prop:"phone",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.phone,"onUpdate:modelValue":e[4]||(e[4]=t=>l.value.phone=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(r.value.phone),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"Street",prop:"street",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.street,"onUpdate:modelValue":e[5]||(e[5]=t=>l.value.street=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(c(y)(r.value.address.street)),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"City",prop:"city",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.city,"onUpdate:modelValue":e[6]||(e[6]=t=>l.value.city=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(c(y)(r.value.address.city)),1)]),_:1}))]),_:1},8,["required"]),n(v,{label:"Zipcode",prop:"zipcode",required:a.value},{default:u(()=>[a.value?(s(),o(m,{key:0,modelValue:l.value.zipcode,"onUpdate:modelValue":e[7]||(e[7]=t=>l.value.zipcode=t)},null,8,["modelValue"])):(s(),o(d,{key:1},{default:u(()=>[p(f(r.value.address.zipcode),1)]),_:1}))]),_:1},8,["required"])]),_:1},8,["model","class"]),e[13]||(e[13]=V("div",{class:"v-spacer-20"},null,-1)),a.value?(s(),P("div",T,[n(q,{class:"btn-solid-primary",onClick:B},{default:u(()=>e[10]||(e[10]=[p("Save")])),_:1}),n(q,{class:"btn-secondary",onClick:e[8]||(e[8]=t=>a.value=!1)},{default:u(()=>e[11]||(e[11]=[p("Cancel")])),_:1})])):h("",!0)])):(s(),o(d,{key:1},{default:u(()=>e[14]||(e[14]=[p("Loading profile...")])),_:1}))}}});export{$ as default};
