import{d as q,u as A,a as F,r as c,c as D,w as I,b as y,e as i,f as o,g as t,h as d,o as m,i as j,j as V,k as g,l as k,t as w,E as h}from"./index-DUnkl4LZ.js";const H="/fake_store/assets/eloura_blue-DpEZw_wu.png",M={class:"auth-wrapper"},T={class:"auth-card"},Z={key:2,class:"v-space-15"},z={class:"login-links"},K=q({__name:"LoginView",setup(G){const _=A(),$=j(),{t:p,locale:U}=F(),v=c(),b=c(!1),s=c(!0),a=c({email:"",username:"",password:"",confirmPassword:"",remember:!1}),f=e=>({required:!0,message:D(()=>p("validation.required",{field:p(e)})),trigger:"blur"}),P={username:[f("username")],email:[f("email")],password:[f("password")],confirmPassword:[f("confirmPassword")]},C=async e=>{await v.value.validate(async l=>{if(l){b.value=!0;try{let n=!1;if(e==="login")n=await _.login(a.value.username,a.value.password);else{const u={username:a.value.username,password:a.value.password,email:a.value.email};n=await _.signup(u)}n?$.push("/"):h.error(_.error||p(e==="login"?"validation.loginFailed":"validation.signUpFailed"))}catch{h.error("Invalid credentials")}finally{b.value=!1}}})},E=()=>{C(s.value?"login":"signup")},L=()=>{s.value=!s.value,v.value.resetFields()};return I(U,()=>{var e;(e=v.value)==null||e.validate()}),(e,l)=>{const n=d("el-input"),u=d("el-form-item"),S=d("el-checkbox"),B=d("el-button"),N=d("router-link"),R=d("el-form");return m(),y("div",M,[i("div",T,[l[6]||(l[6]=i("div",{class:"login-header"},[i("img",{src:H,alt:"Eloura Logo",height:135,width:170})],-1)),o(R,{model:a.value,rules:P,ref_key:"formRef",ref:v,"label-position":"top"},{default:t(()=>[s.value?g("",!0):(m(),V(u,{key:0,label:e.$t("email"),prop:"email"},{default:t(()=>[o(n,{modelValue:a.value.email,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.email=r)},null,8,["modelValue"])]),_:1},8,["label"])),o(u,{label:e.$t("username"),prop:"username"},{default:t(()=>[o(n,{modelValue:a.value.username,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.username=r)},null,8,["modelValue"])]),_:1},8,["label"]),o(u,{label:e.$t("password"),prop:"password"},{default:t(()=>[o(n,{modelValue:a.value.password,"onUpdate:modelValue":l[2]||(l[2]=r=>a.value.password=r),"show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),s.value?g("",!0):(m(),V(u,{key:1,label:e.$t("confirmPassword"),prop:"confirmPassword"},{default:t(()=>[o(n,{modelValue:a.value.confirmPassword,"onUpdate:modelValue":l[3]||(l[3]=r=>a.value.confirmPassword=r),"show-password":""},null,8,["modelValue"])]),_:1},8,["label"])),s.value?g("",!0):(m(),y("div",Z)),s.value?(m(),V(u,{key:3},{default:t(()=>[o(S,{modelValue:a.value.remember,"onUpdate:modelValue":l[4]||(l[4]=r=>a.value.remember=r)},{default:t(()=>[k(w(e.$t("remember")),1)]),_:1},8,["modelValue"])]),_:1})):g("",!0),o(B,{class:"btn-solid-primary",onClick:E,loading:b.value,round:""},{default:t(()=>[k(w(s.value?e.$t("login"):e.$t("signUp")),1)]),_:1},8,["loading"]),i("div",z,[o(N,{to:""},{default:t(()=>[k(w(e.$t("forgotUsernamePassword")),1)]),_:1}),l[5]||(l[5]=i("br",null,null,-1)),i("a",{onClick:L},w(s.value?e.$t("signUp"):e.$t("alreadyHaveAcct")),1)])]),_:1},8,["model"])])])}}});export{K as default};
