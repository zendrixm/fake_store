import{d as U,n as N,r as P,c as S,b,e as i,k as w,f as t,t as c,g as l,h as r,o as f,l as h,x as A,z as Q,j as R,F as G,m as J,E as K,i as O,_ as W,p as X}from"./index-DUnkl4LZ.js";const Y={class:"cart-wrapper"},Z={class:"txtDarkBlue"},ee={key:0,class:"table-scroll-wrapper"},te=["src","alt"],le={class:"card-header"},ae=["src"],ne={class:"card-body"},oe={key:1,class:"cart-total"},se={class:"check-all-wrapper"},ce={class:"total-wrapper"},de={class:"flex"},ue=U({__name:"AddToCartSection",props:{products:{type:Array,default:()=>[]}},emits:["handleQuantityChange","removeProduct","selectionChange"],setup(m,{emit:C}){const g=O(),k=N(),y=m,_=C,n=P([]),d=P(2),u=S(()=>n.value.length===y.products.length),z=S(()=>n.value.length>0&&!u.value),D=a=>{n.value=a.map(o=>o.id),_("selectionChange",n.value)},E=(a,o)=>{_("handleQuantityChange",{value:a,product:o})},q=a=>{_("removeProduct",a)},L=a=>{n.value=a?y.products.map(o=>o.id):[],_("selectionChange",n.value)},T=async()=>{if(n.value.length===0){K.warning("Please select at least one product to checkout.");return}await k.checkoutSelectedProducts(d.value,n.value),g.push("/confirmation")};return(a,o)=>{const p=r("el-table-column"),B=r("el-input-number"),F=r("el-icon"),$=r("el-button"),M=r("el-table"),I=r("el-checkbox"),v=r("el-text"),V=r("el-row"),j=r("el-checkbox-group"),H=r("el-col");return f(),b("div",Y,[i("h2",Z,c(a.$t("shoppingCart")),1),m.products.length?(f(),b("div",ee,[t(M,{class:"cart-table",data:m.products,stripe:"",onSelectionChange:D,"row-key":"id"},{default:l(()=>[t(p,{type:"selection",width:"55"}),t(p,{label:"",width:"120"},{default:l(({row:e})=>[i("img",{src:e.image,alt:e.title,width:"70",height:"80"},null,8,te)]),_:1}),t(p,{prop:"title",label:a.$t("product"),width:"280"},null,8,["label"]),t(p,{prop:"price",label:a.$t("unitPrice"),width:"170"},{default:l(({row:e})=>[h(" $"+c(e.price.toFixed(2)),1)]),_:1},8,["label"]),t(p,{label:a.$t("quantity"),width:"220"},{default:l(({row:e})=>[t(B,{modelValue:e.quantity,"onUpdate:modelValue":s=>e.quantity=s,min:1,onChange:s=>a.$emit("handleQuantityChange",s,e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),t(p,{label:a.$t("subtotal"),width:"170"},{default:l(({row:e})=>[h(" $"+c((e.price*e.quantity).toFixed(2)),1)]),_:1},8,["label"]),t(p,{label:a.$t("action"),align:"center",width:"80"},{default:l(({row:e})=>[t($,{class:"cart-btn",onClick:s=>q(e.id)},{default:l(()=>[t(F,{size:18,color:"#00549a"},{default:l(()=>[t(A(Q))]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])])):w("",!0),t(V,{gutter:20},{default:l(()=>[t(H,{xs:24},{default:l(()=>[m.products.length?(f(),R(j,{key:0,modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=e=>n.value=e),class:"cart-card-mobile",onChange:o[1]||(o[1]=()=>_("selectionChange",n.value))},{default:l(()=>[(f(!0),b(G,null,J(m.products,e=>(f(),b("div",{class:"cart-card",key:e.id},[i("div",le,[t(I,{value:e.id},null,8,["value"]),i("img",{src:e.image,alt:"Product Image",class:"product-img"},null,8,ae)]),i("div",ne,[t(v,{class:"product-title"},{default:l(()=>[h(c(e.title),1)]),_:2},1024),t(V,null,{default:l(()=>[t(v,{class:"txtBold"},{default:l(()=>[h(c(a.$t("unitPrice")),1)]),_:1}),o[2]||(o[2]=i("div",{class:"spacer-5"},null,-1)),t(v,null,{default:l(()=>[h("$"+c(e.price.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(v,{class:"txtBold"},{default:l(()=>[h(c(a.$t("subtotal")),1)]),_:1}),o[3]||(o[3]=i("div",{class:"spacer-5"},null,-1)),t(v,null,{default:l(()=>[h("$"+c((e.price*e.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(B,{modelValue:e.quantity,"onUpdate:modelValue":s=>e.quantity=s,min:1,onChange:s=>E(s,e)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t($,{class:"cart-btn",onClick:s=>q(e.id)},{default:l(()=>[t(F,{size:18,color:"#00549a"},{default:l(()=>[t(A(Q))]),_:1})]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["modelValue"])):w("",!0),m.products.length?(f(),b("div",oe,[i("div",se,[t(I,{label:a.$t("all"),"model-value":u.value,indeterminate:z.value,onChange:L,class:"display-xs"},null,8,["label","model-value","indeterminate"])]),i("div",ce,[i("div",de,[t(v,null,{default:l(()=>[h(c(a.$t("total"))+": ",1)]),_:1}),t(v,{class:"txtDarkBlue txtBold"},{default:l(()=>[h(" $"+c(m.products.filter(e=>n.value.includes(e.id)).reduce((e,s)=>e+s.price*s.quantity,0).toFixed(2)),1)]),_:1})]),t($,{class:"btn-solid-primary",onClick:T},{default:l(()=>[h(c(a.$t("checkout")),1)]),_:1})])])):w("",!0)]),_:1})]),_:1})])}}}),ie=W(ue,[["__scopeId","data-v-ff937f32"]]),x=2,he=U({__name:"CartView",setup(m){const C=P([]),g=N(),k=S(()=>g.cartList),y=d=>{C.value=d},_=async(d,u)=>{console.log("Row",u),u&&(u.quantity=d,await g.updateCartProduct(x,u.id,d))},n=async d=>{C.value=C.value.filter(u=>u!==d),await g.removeFromCartAndSync(x,d)};return X(()=>{g.fetchCart(x)}),(d,u)=>(f(),R(ie,{products:k.value,onHandleQuantityChange:_,onRemoveProduct:n,onSelectionChange:y},null,8,["products"]))}});export{he as default};
