const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/InfoDialog-B_3YmzIK.js","assets/index-DLnUSDzh.js","assets/index-C7EX3q6Q.css","assets/InfoDialog-CsSRyTXu.css"])))=>i.map(i=>d[i]);
import{d as M,c,n as Q,a as t,u as U,r as W,o as m,_ as X,b as Y,e as x,f as g,g as I,w as ee,h as le,i as a,j as o,k as u,l as ae,F as R,m as se,p as oe,q as d,t as r,s as V,v as k,x as te,E as T}from"./index-DLnUSDzh.js";import{c as q}from"./Formatter-Cy_bJuB8.js";const ne="/fake_store/assets/eloura_blue-DpEZw_wu.png",re={class:"message-icon"},ue=["stroke"],ie={class:"message-content"},de=M({__name:"MessageBox",props:{message:{type:String,default:"This is a message box"},type:{type:String,default:"info"}},setup(C){const h={info:"#0b2545",warning:"orange",error:"red"}[C.type]||"#0b2545";return(p,_)=>(m(),c("div",{class:Q(["message-container",C.type])},[t("div",re,[(m(),c("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",stroke:U(h),fill:"none","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},_[0]||(_[0]=[t("circle",{cx:"12",cy:"12",r:"10"},null,-1),t("line",{x1:"12",y1:"7.5",x2:"12",y2:"12"},null,-1),t("circle",{cx:"12",cy:"16",r:"0.8"},null,-1)]),8,ue))]),t("div",ie,[W(p.$slots,"message",{},void 0,!0)])],2))}}),me=X(de,[["__scopeId","data-v-dc08f1e2"]]),pe={class:"auth-wrapper"},fe={class:"auth-card"},ge={key:2,class:"v-spacer-15"},ve={class:"hidden-sm-and-up"},_e=M({__name:"LoginView",setup(C){const w=Y(),h=se(),{t:p,locale:_}=x(),b=g(),P=g(!1),i=g(!0),B=ae(()=>oe(()=>import("./InfoDialog-B_3YmzIK.js"),__vite__mapDeps([0,1,2,3]))),N=g(!1),S=g(!1),D=g(!1),L=I(()=>w.allUser.map(e=>({...e,fullName:`${q(e.firstName)} ${q(e.lastName)}`}))),n=g({email:"",username:"",password:"",confirmPassword:"",remember:!1}),$=e=>({required:!0,message:I(()=>p("validation.required",{field:p(e)})),trigger:"blur"}),z={username:[$("username")],email:[$("email")],password:[$("password")],confirmPassword:[$("confirmPassword")]},j=async e=>{await b.value.validate(async l=>{if(l){P.value=!0;try{if(e==="login"){const f=await w.loginUser(n.value.username,n.value.password);if(console.log("Test user login:",f),f)h.push("/");else{T.error(p("validation.loginFailed"));return}}else D.value=!0}catch{T.error(p(e==="login"?"validation.loginFailed":"validation.signUpFailed"))}finally{P.value=!1}}})},O=()=>{j(i.value?"login":"signup")},H=()=>{i.value=!i.value,b.value.resetFields()};return ee(_,()=>{var e;(e=b.value)==null||e.validate()}),le(async()=>{await w.fetchAllUsers()}),(e,l)=>{const f=u("el-text"),E=u("el-link"),y=u("el-input"),v=u("el-form-item"),Z=u("el-checkbox"),G=u("el-button"),J=u("el-form"),A=u("el-row"),F=u("el-table-column"),K=u("el-table");return m(),c(R,null,[t("div",pe,[a(me,{type:"info"},{message:o(()=>[a(f,null,{default:o(()=>[d(r(e.$t("message.loginInfo")),1)]),_:1}),l[10]||(l[10]=t("div",{class:"inline-flex mar-r-5"},null,-1)),a(E,{onClick:l[0]||(l[0]=s=>N.value=!0)},{default:o(()=>[d(r(e.$t("viewTestCredentials")),1)]),_:1})]),_:1}),t("div",fe,[l[13]||(l[13]=t("div",{class:"auth-card-logo"},[t("img",{loading:"lazy",src:ne,alt:"Eloura Logo",height:135,width:170})],-1)),a(J,{model:n.value,rules:z,ref_key:"formRef",ref:b,"label-position":"top"},{default:o(()=>[i.value?k("",!0):(m(),V(v,{key:0,label:e.$t("email"),prop:"email"},{default:o(()=>[a(y,{modelValue:n.value.email,"onUpdate:modelValue":l[1]||(l[1]=s=>n.value.email=s)},null,8,["modelValue"])]),_:1},8,["label"])),a(v,{label:e.$t("username"),prop:"username"},{default:o(()=>[a(y,{modelValue:n.value.username,"onUpdate:modelValue":l[2]||(l[2]=s=>n.value.username=s)},null,8,["modelValue"])]),_:1},8,["label"]),a(v,{label:e.$t("password"),prop:"password"},{default:o(()=>[a(y,{modelValue:n.value.password,"onUpdate:modelValue":l[3]||(l[3]=s=>n.value.password=s),"show-password":""},null,8,["modelValue"])]),_:1},8,["label"]),i.value?k("",!0):(m(),V(v,{key:1,label:e.$t("confirmPassword"),prop:"confirmPassword"},{default:o(()=>[a(y,{modelValue:n.value.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=s=>n.value.confirmPassword=s),"show-password":""},null,8,["modelValue"])]),_:1},8,["label"])),i.value?k("",!0):(m(),c("div",ge)),i.value?(m(),V(v,{key:3},{default:o(()=>[a(Z,{modelValue:n.value.remember,"onUpdate:modelValue":l[5]||(l[5]=s=>n.value.remember=s)},{default:o(()=>[d(r(e.$t("remember")),1)]),_:1},8,["modelValue"])]),_:1})):k("",!0),a(G,{class:"btn btn-primary",onClick:O,loading:P.value,round:""},{default:o(()=>[d(r(i.value?e.$t("login"):e.$t("signUp")),1)]),_:1},8,["loading"]),l[11]||(l[11]=t("div",{class:"v-spacer-15"},null,-1)),a(E,{onClick:l[6]||(l[6]=s=>S.value=!0)},{default:o(()=>[d(r(e.$t("forgotUsernamePassword")),1)]),_:1}),l[12]||(l[12]=t("br",null,null,-1)),a(E,{onClick:H},{default:o(()=>[d(r(i.value?e.$t("signUp"):e.$t("alreadyHaveAcct")),1)]),_:1})]),_:1},8,["model"])])]),a(U(B),{modelValue:N.value,"onUpdate:modelValue":l[7]||(l[7]=s=>N.value=s),title:e.$t("testCredentials"),width:"700"},{messageBody:o(()=>[t("div",ve,[(m(!0),c(R,null,te(L.value,s=>(m(),V(A,{class:"card-container",key:s.id},{default:o(()=>[a(A,{class:"card-body"},{default:o(()=>[a(f,{class:"txtBlack"},{default:o(()=>[d(r(s.fullName),1)]),_:2},1024),a(f,null,{default:o(()=>[t("strong",null,r(e.$t("username"))+":",1),d(" "+r(s.username),1)]),_:2},1024),a(f,null,{default:o(()=>[t("strong",null,r(e.$t("password"))+":",1),d(" "+r(s.password),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),a(K,{data:L.value,class:"hidden-xs",stripe:""},{default:o(()=>[a(F,{label:e.$t("name"),prop:"fullName"},null,8,["label"]),a(F,{label:e.$t("username"),prop:"username"},null,8,["label"]),a(F,{label:e.$t("password"),prop:"password"},null,8,["label"])]),_:1},8,["data"])]),_:1},8,["modelValue","title"]),a(U(B),{modelValue:S.value,"onUpdate:modelValue":l[8]||(l[8]=s=>S.value=s),title:e.$t("forgotUsernamePassword"),type:"warning",message:e.$t("message.feature",{feature:e.$t("forgotUsernamePassword")})},null,8,["modelValue","title","message"]),a(U(B),{modelValue:D.value,"onUpdate:modelValue":l[9]||(l[9]=s=>D.value=s),title:e.$t("signUp"),type:"warning",message:e.$t("message.feature",{feature:e.$t("signUp")})},null,8,["modelValue","title","message"])],64)}}});export{_e as default};
