import{d as I,b as L,g as D,e as j,f as U,w as H,h as T,s as d,j as o,k as y,o as r,a as q,i as m,c as G,v as B,t as n,u as c,q as p,n as J,E}from"./index-DxJcn1B2.js";import{c as g,b as K}from"./Formatter-Cy_bJuB8.js";const O="data:image/svg+xml,%3csvg%20viewBox='0%200%2048%2048'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6%2034.5V42h7.5l22.13-22.13-7.5-7.5L6%2034.5zm35.41-20.41c.78-.78.78-2.05%200-2.83l-4.67-4.67c-.78-.78-2.05-.78-2.83%200l-3.66%203.66%207.5%207.5%203.66-3.66z'%20fill='%23134074'%20class='fill-000000'%3e%3c/path%3e%3cpath%20d='M0%200h48v48H0z'%20fill='none'%3e%3c/path%3e%3c/svg%3e",Q={class:"flex-space-between"},W={key:0,class:"flex-end action-buttons"},x=I({__name:"UserProfile",setup(X){const N=L(),l=D(()=>N.userDetails),M=D(()=>N.user.id),{t:$,locale:P}=j(),s=U(!1),V=U(),e=U({username:"",email:"",firstname:"",lastname:"",birthDate:"",age:0,phone:"",state:"",city:"",postalCode:""}),b=u=>({required:!0,message:D(()=>$("validation.required",{field:$(u)})),trigger:"blur"}),R={username:[b("username")],email:[b("email")],firstname:[b("firstName")],lastname:[b("lastName")],birthDate:[b("birthDate")],age:[b("age")],phone:[b("phone")],state:[b("state")],city:[b("city")],postalCode:[b("postalCode")]},S=()=>{var u,t,k,f,i,v,_,h,C,a,w,z;s.value=!s.value,s.value&&((u=V.value)==null||u.resetFields(),e.value.username=((t=l.value)==null?void 0:t.username)||"",e.value.email=((k=l.value)==null?void 0:k.email)||"",e.value.firstname=((f=l.value)==null?void 0:f.firstName)||"",e.value.lastname=((i=l.value)==null?void 0:i.lastName)||"",e.value.birthDate=((v=l.value)==null?void 0:v.birthDate)||"",e.value.age=((_=l.value)==null?void 0:_.age)||0,e.value.phone=((h=l.value)==null?void 0:h.phone)||"",e.value.state=((C=l.value)==null?void 0:C.address.state)||"",e.value.city=((a=l.value)==null?void 0:a.address.city)||"",e.value.postalCode=((w=l.value)==null?void 0:w.address.postalCode)||""),(z=V.value)==null||z.clearValidate()},A=()=>{var u;s.value=!1,(u=V.value)==null||u.clearValidate()},F=()=>{var u;(u=V.value)==null||u.validate(t=>{t?(E.success("Profile updated successfully!"),s.value=!1):E.error("Please complete all required fields.")})};return H(P,()=>{var u;(u=V.value)==null||u.validate()}),T(()=>{N.fetchActiveUser(M.value).then(()=>{var u;l.value&&(e.value.username=l.value.username,e.value.email=l.value.email,e.value.firstname=l.value.firstName,e.value.lastname=l.value.lastName,e.value.birthDate=l.value.birthDate,e.value.age=l.value.age,e.value.phone=(u=l.value)==null?void 0:u.phone,e.value.state=l.value.address.state,e.value.city=l.value.address.city,e.value.postalCode=l.value.address.postalCode)})}),(u,t)=>{const k=y("el-button"),f=y("el-input"),i=y("el-text"),v=y("el-form-item"),_=y("el-date-picker"),h=y("el-form"),C=y("el-card");return l.value?(r(),d(C,{key:0,class:"user-profile"},{default:o(()=>[q("div",Q,[q("h2",null,n(c(g)(l.value.firstName))+" "+n(c(g)(l.value.lastName)),1),s.value?B("",!0):(r(),d(k,{key:0,class:"icon-btn",size:16,onClick:S},{default:o(()=>t[10]||(t[10]=[q("img",{src:O,width:20,height:20,alt:"edit"},null,-1)])),_:1}))]),t[11]||(t[11]=q("div",{class:"v-spacer-20"},null,-1)),m(h,{ref_key:"formRef",ref:V,model:e.value,rules:R,"label-position":"right",class:J(s.value?"":"is-edit")},{default:o(()=>[m(v,{label:u.$t("username"),prop:"username",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.username,"onUpdate:modelValue":t[0]||(t[0]=a=>e.value.username=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>[p(n(l.value.username),1)]),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("email"),prop:"email",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.email,"onUpdate:modelValue":t[1]||(t[1]=a=>e.value.email=a),disabled:""},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>[p(n(l.value.email),1)]),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("firstName"),prop:"firstname",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.firstname,"onUpdate:modelValue":t[2]||(t[2]=a=>e.value.firstname=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>[p(n(c(g)(l.value.firstName)),1)]),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("lastName"),prop:"lastname",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.lastname,"onUpdate:modelValue":t[3]||(t[3]=a=>e.value.lastname=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>[p(n(c(g)(l.value.lastName)),1)]),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("birthDate"),prop:"birthDate",required:s.value},{default:o(()=>[s.value?(r(),d(_,{key:0,modelValue:e.value.birthDate,"onUpdate:modelValue":t[4]||(t[4]=a=>e.value.birthDate=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>{var a;return[p(n((a=l.value)!=null&&a.birthDate?c(K)(l.value.birthDate):"No birthdate available"),1)]}),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("age"),prop:"age",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.age,"onUpdate:modelValue":t[5]||(t[5]=a=>e.value.age=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>[p(n(l.value.age),1)]),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("phone"),prop:"phone",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.phone,"onUpdate:modelValue":t[6]||(t[6]=a=>e.value.phone=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>[p(n(l.value.phone),1)]),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("state"),prop:"state",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.state,"onUpdate:modelValue":t[7]||(t[7]=a=>e.value.state=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>{var a;return[p(n(c(g)((a=l.value.address)==null?void 0:a.state)),1)]}),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("city"),prop:"city",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.city,"onUpdate:modelValue":t[8]||(t[8]=a=>e.value.city=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>{var a;return[p(n(c(g)((a=l.value.address)==null?void 0:a.city)),1)]}),_:1}))]),_:1},8,["label","required"]),m(v,{label:u.$t("postalCode"),prop:"postalCode",required:s.value},{default:o(()=>[s.value?(r(),d(f,{key:0,modelValue:e.value.postalCode,"onUpdate:modelValue":t[9]||(t[9]=a=>e.value.postalCode=a)},null,8,["modelValue"])):(r(),d(i,{key:1},{default:o(()=>{var a;return[p(n((a=l.value.address)==null?void 0:a.postalCode),1)]}),_:1}))]),_:1},8,["label","required"])]),_:1},8,["model","class"]),t[12]||(t[12]=q("div",{class:"v-spacer-20"},null,-1)),s.value?(r(),G("div",W,[m(k,{class:"btn btn-primary",onClick:F},{default:o(()=>[p(n(u.$t("save")),1)]),_:1}),m(k,{class:"btn btn-secondary",onClick:A},{default:o(()=>[p(n(u.$t("cancel")),1)]),_:1})])):B("",!0)]),_:1})):(r(),d(i,{key:1},{default:o(()=>t[13]||(t[13]=[p("Loading profile...")])),_:1}))}}});export{x as default};
