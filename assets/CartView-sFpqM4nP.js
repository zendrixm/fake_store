import{d as U,y as D,f as P,g as S,c as b,a as c,v as w,i as t,t as d,j as l,k as r,o as g,q as m,u as A,D as Q,s as N,F as G,x as J,E as K,m as O,_ as W,h as X}from"./index-9SfRDxQp.js";const Y={class:"cart-wrapper"},Z={class:"txtDarkBlue"},ee={key:0,class:"table-scroll-wrapper"},te=["src","alt"],le={class:"card-header"},ae=["src"],ne={class:"card-body"},oe={key:1,class:"cart-total"},se={class:"check-all-wrapper"},ce={class:"total-wrapper"},de={class:"flex"},ue=U({__name:"AddToCartSection",props:{products:{type:Array,default:()=>[]}},emits:["handleQuantityChange","removeProduct","selectionChange"],setup(h,{emit:C}){const f=O(),k=D(),y=h,_=C,o=P([]),u=P(2),i=S(()=>o.value.length===y.products.length),R=S(()=>o.value.length>0&&!i.value),E=a=>{o.value=a.map(n=>n.id),_("selectionChange",o.value)},L=(a,n)=>{_("handleQuantityChange",{value:a,product:n})},q=a=>{_("removeProduct",a)},T=a=>{o.value=a?y.products.map(n=>n.id):[],_("selectionChange",o.value)},z=async()=>{if(o.value.length===0){K.warning("Please select at least one product to checkout.");return}await k.checkoutSelectedProducts(u.value,o.value),f.push("/confirmation")};return(a,n)=>{const p=r("el-table-column"),B=r("el-input-number"),F=r("el-icon"),$=r("el-button"),M=r("el-table"),I=r("el-checkbox"),v=r("el-text"),V=r("el-row"),j=r("el-checkbox-group"),H=r("el-col");return g(),b("div",Y,[c("h2",Z,d(a.$t("shoppingCart")),1),n[4]||(n[4]=c("div",{class:"v-spacer-15"},null,-1)),h.products.length?(g(),b("div",ee,[t(M,{class:"cart-table",data:h.products,stripe:"",onSelectionChange:E,"row-key":"id"},{default:l(()=>[t(p,{type:"selection",width:"55"}),t(p,{label:"",width:"120"},{default:l(({row:e})=>[c("img",{src:e.image,alt:e.title,width:"70",height:"80"},null,8,te)]),_:1}),t(p,{prop:"title",label:a.$t("product"),width:"280"},null,8,["label"]),t(p,{prop:"price",label:a.$t("unitPrice"),width:"170"},{default:l(({row:e})=>[m(" $"+d(e.price.toFixed(2)),1)]),_:1},8,["label"]),t(p,{label:a.$t("quantity"),width:"220"},{default:l(({row:e})=>[t(B,{modelValue:e.quantity,"onUpdate:modelValue":s=>e.quantity=s,min:1,onChange:s=>a.$emit("handleQuantityChange",s,e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1},8,["label"]),t(p,{label:a.$t("subtotal"),width:"170"},{default:l(({row:e})=>[m(" $"+d((e.price*e.quantity).toFixed(2)),1)]),_:1},8,["label"]),t(p,{label:a.$t("action"),align:"center",width:"80"},{default:l(({row:e})=>[t($,{class:"cart-btn",onClick:s=>q(e.id)},{default:l(()=>[t(F,{size:18,color:"#00549a"},{default:l(()=>[t(A(Q))]),_:1})]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data"])])):w("",!0),t(V,{gutter:20},{default:l(()=>[t(H,{xs:24},{default:l(()=>[h.products.length?(g(),N(j,{key:0,modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=e=>o.value=e),class:"cart-card-mobile",onChange:n[1]||(n[1]=()=>_("selectionChange",o.value))},{default:l(()=>[(g(!0),b(G,null,J(h.products,e=>(g(),b("div",{class:"cart-card",key:e.id},[c("div",le,[t(I,{value:e.id},null,8,["value"]),c("img",{src:e.image,alt:"Product Image",class:"product-img"},null,8,ae)]),c("div",ne,[t(v,{class:"product-title"},{default:l(()=>[m(d(e.title),1)]),_:2},1024),t(V,null,{default:l(()=>[t(v,{class:"txtBold"},{default:l(()=>[m(d(a.$t("unitPrice")),1)]),_:1}),n[2]||(n[2]=c("div",{class:"spacer-5"},null,-1)),t(v,null,{default:l(()=>[m("$"+d(e.price.toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(V,null,{default:l(()=>[t(v,{class:"txtBold"},{default:l(()=>[m(d(a.$t("subtotal")),1)]),_:1}),n[3]||(n[3]=c("div",{class:"spacer-5"},null,-1)),t(v,null,{default:l(()=>[m("$"+d((e.price*e.quantity).toFixed(2)),1)]),_:2},1024)]),_:2},1024),t(B,{modelValue:e.quantity,"onUpdate:modelValue":s=>e.quantity=s,min:1,onChange:s=>L(s,e)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t($,{class:"cart-btn",onClick:s=>q(e.id)},{default:l(()=>[t(F,{size:18,color:"#00549a"},{default:l(()=>[t(A(Q))]),_:1})]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["modelValue"])):w("",!0),h.products.length?(g(),b("div",oe,[c("div",se,[t(I,{label:a.$t("all"),"model-value":i.value,indeterminate:R.value,onChange:T,class:"display-xs"},null,8,["label","model-value","indeterminate"])]),c("div",ce,[c("div",de,[t(v,null,{default:l(()=>[m(d(a.$t("total"))+": ",1)]),_:1}),t(v,{class:"txtDarkBlue txtBold"},{default:l(()=>[m(" $"+d(h.products.filter(e=>o.value.includes(e.id)).reduce((e,s)=>e+s.price*s.quantity,0).toFixed(2)),1)]),_:1})]),t($,{class:"btn-solid-primary",onClick:z},{default:l(()=>[m(d(a.$t("checkout")),1)]),_:1})])])):w("",!0)]),_:1})]),_:1})])}}}),ie=W(ue,[["__scopeId","data-v-0dc4f08d"]]),x=2,me=U({__name:"CartView",setup(h){const C=P([]),f=D(),k=S(()=>f.cartList),y=u=>{C.value=u},_=async(u,i)=>{console.log("Row",i),i&&(i.quantity=u,await f.updateCartProduct(x,i.id,u))},o=async u=>{C.value=C.value.filter(i=>i!==u),await f.removeFromCartAndSync(x,u)};return X(()=>{f.fetchCart(x)}),(u,i)=>(g(),N(ie,{products:k.value,onHandleQuantityChange:_,onRemoveProduct:o,onSelectionChange:y},null,8,["products"]))}});export{me as default};
